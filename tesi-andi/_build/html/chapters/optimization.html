
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ingegnerizzazione del traffico &#8212; Tesi Andi Dulla</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Analisi dei dati ottenuti dalla applicazione di controllo distribuito" href="analisi_dati_rete_BOBI.html" />
    <link rel="prev" title="Reti di sensori" href="sensor.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Tesi Andi Dulla</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   SDN forming per mobile IoT
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Strumenti
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="sensor.html">
   Reti di sensori
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Algoritmi di ottimizzazione
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Ingegnerizzazione del traffico
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Risultati simulazione
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="analisi_dati_rete_BOBI.html">
   Analisi dei dati ottenuti dalla applicazione di controllo distribuito
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="main_pipeline.html">
   Albero ricoprente di costo minimo capacitato
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="frank-wolfe.html">
   Metodo Frank &amp; Wolfe
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../_sources/chapters/optimization.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/chapters/optimization.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fchapters/optimization.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/chapters/optimization.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Ingegnerizzazione del traffico</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="ingegnerizzazione-del-traffico">
<h1>Ingegnerizzazione del traffico<a class="headerlink" href="#ingegnerizzazione-del-traffico" title="Permalink to this headline">¶</a></h1>
<p>In questo capitolo vado a mostrare gli aspetti di modellazione del sistema, enunciare il problema e gli algoritmi
proposti.</p>
<p>Introduzione Il routing in una rete è un’operazione complessa che coinvolge molti attori e protcolli che permettono
l’organizzazione fra tutti questi componenti indipendenti fra di loro. Le ragioni della complessità sono molteplici:</p>
<p>Il routing richiede un grado di coordinazione fra i vai nodi nella rete o nel segmento di rete considerato piuttosto che
solo fra due nodi. Ad esempio pensiamo i protocolli di livello 2 e livello 4.</p>
<p>L’architettura di routing deve risolvere tutti quei casi di guasti e malfunzionamenti dei collegamenti o dei nodi,
redirezionare il traffico ed aggiornare i database informativi di ogni device.</p>
<p>Per ottenere delle performance buone, l’algoritmo di routing può essere costretto a modificare le sue rotte
precedentemente calcolate quando parti o segmenti di rete diventano congestionati.</p>
<p>Difficoltà e obiettivi nel routing Le due funzioni principali di un algoritmo di routing sono:</p>
<div class="margin sidebar">
<p class="sidebar-title">Routing table</p>
<p>È la struttura dati che un dispositivo ha al suo interno in cui troviamo una lista di destinatari, la distanza e come
raggiungere quel preciso destinatario ed in più altre informazioni a seconda del protocollo finale che la userà</p>
</div>
<p>È la struttura dati che un dispositivo ha al suo interno in cui troviamo una lista di destinatari, la distanza e come
raggiungere quel preciso destinatario ed in più altre informazioni a seconda del protocollo finale che la userà</p>
<p>la selezione delle rotte fra le varie coppie origine destinazione</p>
<p>la consegna dei messaggi alla corretta destinazione una volta scelta la rotta</p>
<p>La seconda funzione può sembrare banale una volta usate le routing table. Ciò non è sempre vero, in quanto questo
concetto è molto semplice nel caso che io possa fare affidamento sull’infrastruttura di rete. Nel caso in cui questo non
sia vero e quindi io ho a che fare con una infrastruttura non affidabile, diventa fondamentale il modo in cui scelgo il
next-hop.</p>
<div class="margin sidebar">
<p class="sidebar-title">Next-hop</p>
<p>È il dispositivo successivo rispetto al device sotto esame, all’interno del percorso che unisce topologicamente due
punti di interesse, ad esempio possono essere una coppia origine-destinazione</p>
</div>
<p>In quanto è possibile che 2 scelte diverse di next-hop portino allo stesso destinatario nella topologia, ma un next-hop
è stato disconnesso poiché il collegamento prescelto non è più disponibile. Non mi concentro sulla seconda funzione e
sul capire cosa succede nel caso che un collegamento non sia disponibile ma mi concentrerò sulla prima funzione e come
influisce sulle performance della rete.</p>
<p>Vi sono due metriche principali sulla performance di una rete che sono influenzati dall’algoritmo di routing:</p>
<ol class="simple">
<li><p>Throughput, la quantità di servizio offerta dalla rete</p></li>
<li><p>Latenza media dei pacchetti, la qualità del servizio offerto dalla rete</p></li>
</ol>
<p>Il routing interagisce con il controllo di flusso per determinare queste metriche di performance attraverso un controllo
a catena chiusa.</p>
<div class="figure align-default" id="markdown-fig">
<a class="bg-primary mb-1 reference internal image-reference" href="https://miro.medium.com/max/1400/1*q_J7uLY97EyiFdYXOXuG0g.png"><img alt="mcu" class="bg-primary mb-1" src="https://miro.medium.com/max/1400/1*q_J7uLY97EyiFdYXOXuG0g.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3 </span><span class="caption-text">Immagine <strong>temporanea</strong></span><a class="headerlink" href="#markdown-fig" title="Permalink to this image">¶</a></p>
</div>
<p>Una euristica molto efficace nel tentare di mantenere bassa la latenza di percorrenza del sistema all’aumentare del traffico
è la seguente:</p>
<blockquote>
<div><p>All’aumentare dell’intensità media del carico offerto valuto la latenza media del sistema, quando qusta diventa
eccessiva inizio a scartare dei pacchetti</p>
</div></blockquote>
<p>Questo ha come effetto il comportamento secondo cui tanto più l’algoritmo riesce a tenere bassa la latenza e tanto più
potrà ammettere traffico ed aumentare così il throughput che la rete offre.</p>
<p>Propongo la seguente simulazione:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;C:\Users\DULLA\PycharmProjects\Thesis_Data_Analisys\models&quot;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;C:\Users\DULLA\PycharmProjects\Thesis_Data_Analisys&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">simpy</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">SimComponents</span>
<span class="kn">from</span> <span class="nn">SimComponents</span> <span class="kn">import</span> <span class="n">PacketGenerator</span><span class="p">,</span> <span class="n">PacketSink</span><span class="p">,</span> <span class="n">SwitchPort</span><span class="p">,</span> <span class="n">PortMonitor</span>
<span class="n">adist</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">expovariate</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">sdist</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">expovariate</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>  <span class="c1"># mean size 100 bytes</span>
<span class="n">samp_dist</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">expovariate</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">)</span>
<span class="n">port_rate</span> <span class="o">=</span> <span class="mf">1.5</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">simpy</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>  <span class="c1"># Create the SimPy environment</span>
<span class="c1"># Create the packet generators and sink</span>
<span class="n">ps</span> <span class="o">=</span> <span class="n">PacketSink</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rec_arrivals</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pg</span> <span class="o">=</span> <span class="n">PacketGenerator</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="s2">&quot;Greg&quot;</span><span class="p">,</span> <span class="n">adist</span><span class="p">,</span> <span class="n">sdist</span><span class="p">)</span>
<span class="n">switch_port</span> <span class="o">=</span> <span class="n">SwitchPort</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">port_rate</span><span class="p">,</span> <span class="n">qlimit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="c1"># Using a PortMonitor to track queue sizes over time</span>
<span class="n">pm</span> <span class="o">=</span> <span class="n">PortMonitor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">switch_port</span><span class="p">,</span> <span class="n">samp_dist</span><span class="p">)</span>
<span class="c1"># Wire packet generators, switch ports, and sinks together</span>
<span class="n">pg</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">switch_port</span>
<span class="n">switch_port</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">ps</span>
<span class="c1"># Run it</span>
<span class="n">env</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">8000000</span><span class="p">)</span>
<span class="c1"># print(&quot;Last 10 waits: &quot; + &quot;, &quot;.join([&quot;{:.3f}&quot;.format(x) for x in ps.waits[-10:]]))</span>
<span class="c1"># print(&quot;Last 10 queue sizes: {}&quot;.format(pm.sizes[-1000:]))</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">axis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">sizes</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Line plot for System Occupation&quot;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;customers in system&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_theme</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;darkgrid&quot;</span><span class="p">)</span>

<span class="c1"># print(&quot;Last 10 sink arrival times: &quot; + &quot;, &quot;.join([&quot;{:.3f}&quot;.format(x) for x in ps.arrivals[-10:]]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;average wait = </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">waits</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">waits</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;received: </span><span class="si">{}</span><span class="s2">, dropped </span><span class="si">{}</span><span class="s2">, sent </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">switch_port</span><span class="o">.</span><span class="n">packets_rec</span><span class="p">,</span> <span class="n">switch_port</span><span class="o">.</span><span class="n">packets_drop</span><span class="p">,</span> <span class="n">pg</span><span class="o">.</span><span class="n">packets_sent</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;loss rate: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">switch_port</span><span class="o">.</span><span class="n">packets_drop</span><span class="p">)</span> <span class="o">/</span> <span class="n">switch_port</span><span class="o">.</span><span class="n">packets_rec</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;average system occupancy: </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">sizes</span><span class="p">))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">sizes</span><span class="p">)))</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">axis</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">waits</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Histogram for Sojourn times&quot;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;number&quot;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;normalized frequency of occurrence&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">axis</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">arrivals</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Histogram for Sink Interarrival times&quot;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;normalized frequency of occurrence&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">avgWait</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">del</span> <span class="n">env</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">pg</span><span class="p">,</span> <span class="n">pm</span><span class="p">,</span> <span class="n">switch_port</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">simpy</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>
    <span class="n">ps</span> <span class="o">=</span> <span class="n">PacketSink</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rec_arrivals</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pg</span> <span class="o">=</span> <span class="n">PacketGenerator</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="s2">&quot;Greg&quot;</span><span class="p">,</span> <span class="n">adist</span><span class="p">,</span> <span class="n">sdist</span><span class="p">)</span>
    <span class="n">switch_port</span> <span class="o">=</span> <span class="n">SwitchPort</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">port_rate</span><span class="p">,</span> <span class="n">qlimit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">pm</span> <span class="o">=</span> <span class="n">PortMonitor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">switch_port</span><span class="p">,</span> <span class="n">samp_dist</span><span class="p">)</span>
    <span class="n">pg</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">switch_port</span>
    <span class="n">switch_port</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">ps</span>
    <span class="n">env</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">800000</span><span class="p">)</span>
    <span class="n">wait</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">waits</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">waits</span><span class="p">)</span>
    <span class="c1"># print(&quot;average wait = {:.3f}&quot;.format(wait))</span>
    <span class="n">avgWait</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">wait</span><span class="p">))</span>
    <span class="k">del</span> <span class="n">env</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">pg</span><span class="p">,</span> <span class="n">pm</span><span class="p">,</span> <span class="n">switch_port</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Latenza media con coda lunga 1000&quot;</span><span class="p">)</span>
<span class="n">avgWait</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">avgWait</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">single</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">avgWait</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">avgWait</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">single</span><span class="p">)})</span>
<span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">scatter</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Latency&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Simulation run number&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">del</span> <span class="n">avgWait</span><span class="p">,</span> <span class="n">df</span>
<span class="c1"># del env, ps, pg, pm, switch_port</span>
<span class="n">avgWait</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">simpy</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>
    <span class="n">ps</span> <span class="o">=</span> <span class="n">PacketSink</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rec_arrivals</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pg</span> <span class="o">=</span> <span class="n">PacketGenerator</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="s2">&quot;Greg&quot;</span><span class="p">,</span> <span class="n">adist</span><span class="p">,</span> <span class="n">sdist</span><span class="p">)</span>
    <span class="n">switch_port</span> <span class="o">=</span> <span class="n">SwitchPort</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">port_rate</span><span class="p">,</span> <span class="n">qlimit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
    <span class="n">pm</span> <span class="o">=</span> <span class="n">PortMonitor</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">switch_port</span><span class="p">,</span> <span class="n">samp_dist</span><span class="p">)</span>
    <span class="n">pg</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">switch_port</span>
    <span class="n">switch_port</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">ps</span>
    <span class="n">env</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">800000</span><span class="p">)</span>
    <span class="n">wait</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">waits</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">waits</span><span class="p">)</span>
    <span class="c1"># print(&quot;average wait = {:.3f}&quot;.format(wait))</span>
    <span class="n">avgWait</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">wait</span><span class="p">))</span>
    <span class="k">del</span> <span class="n">env</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">pg</span><span class="p">,</span> <span class="n">pm</span><span class="p">,</span> <span class="n">switch_port</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">avgWait</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">avgWait</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">single</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Latenza media con coda lunga 100000&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">avgWait</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">avgWait</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">single</span><span class="p">)})</span>
<span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">scatter</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Latency&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Simulation run number&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/optimization_1_0.png" src="../_images/optimization_1_0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>average wait = 274448.294
received: 80145, dropped 332, sent 80145
loss rate: 0.004142491733732609
average system occupancy: 2738.686
</pre></div>
</div>
<img alt="../_images/optimization_1_2.png" src="../_images/optimization_1_2.png" />
<img alt="../_images/optimization_1_3.png" src="../_images/optimization_1_3.png" />
<img alt="../_images/optimization_1_4.png" src="../_images/optimization_1_4.png" />
<img alt="../_images/optimization_1_5.png" src="../_images/optimization_1_5.png" />
</div>
</div>
<p>Da questi grafici vediamo come il traffico sia da trattare in modo diverso rispetto alla classica elaborazione statistica
dei segnali. Tutto questo nasce dal fatto che ho bisogno di implementare un controllo della rete. I benefici dell’uso di
algoritmi di controllo SDN unito alle tecniche di controllo SDN per la disseminazione dei risultati e dei comandi,
verranno esposti nell’ultimo capitolo che presenta le applicazioni e i risultati delle simulazioni delle varie applicazioni.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="sensor.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Reti di sensori</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="analisi_dati_rete_BOBI.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Analisi dei dati ottenuti dalla applicazione di controllo distribuito</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Andi Dulla<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>